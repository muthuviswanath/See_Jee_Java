package payrolltask;

import java.util.ArrayList;

public class PayrollManager {
	private ArrayList<Employee> payroll;
	
	public PayrollManager() {
		payroll = new ArrayList<Employee>();
	}
	public void createRecord(int empId, 
							 String empName, 
							 String department, 
							 double salary) 
	{
		for (Employee emp : payroll) {
			if(emp.getEmpId() == empId) {
				System.err.println("Error: Employee with the employee id " + empId +
									" already exisit in the payroll");
				return;
			}
		}
		Employee emp = new Employee(empId, empName, department, salary);
		payroll.add(emp);
		System.out.println("Employee record created successfully");
		
	}
	
	public void updateByDepartment(String departmentName, double salary) {
		boolean isfound = false;
		for(Employee emp: payroll) {
			if(emp.getDepartment().equalsIgnoreCase(departmentName)) {
				emp.setSalary(salary);
				isfound = true;
			}
		}
		if(isfound) {
			System.out.println("Updated the salary for all the employees in "
					+ departmentName);
		}
		else {
			System.out.println("No employee records present in department: " + departmentName);
		}
	}
	
	public void updateByEmployeeId(int empId, 
			 String empName, 
			 String department, 
			 double salary) {
		for(Employee e: payroll) {
			if(e.getEmpId() == empId) {
				e.setEmpName(empName);
				e.setDepartment(department);
				e.setSalary(salary);
				System.out.println("Employee record updated for the employee id: "+ empId);
				return;
			}
		}
		System.out.println("Employee record with the id: " + empId + " is not found");
	}
	
	public void deleteEmployeeRecords(int empId) {
		for(int i=0; i<payroll.size(); i++) {
			if(payroll.get(i).getEmpId() == empId) {
				payroll.remove(i);
				System.out.println("Employee with the employee Id: " + empId 
						+" removed successfully" );
				return;
			}
		}
		System.out.println("Employee Id " + empId + " doesn't exist in the records");
	}
	
	public void getAllEmpRecord() {
		if(payroll.isEmpty()) {
			System.out.println("No employee record(s) present in the payroll");
		}
		else {
			System.out.println("=====List of Employees =======");
			for(Employee e:payroll) {
				System.out.println(e);
			}
		}
		
	}
	public void getEmpByDepartment(String department) {
		boolean found = false;
		System.out.println("=======Employees of " + department +"==============");
		for(Employee e : payroll) {
			if(e.getDepartment().equalsIgnoreCase(department)) {
				System.out.println(e);
				found = true;
				
			}
		}
		if(!found) {
			System.out.println("No Employees found in the department: " + department);
			}
	}
	public void displayRecordsAboveAvgSalary() {
		boolean isfound = false;
		if(payroll.isEmpty()) {
			System.out.println("No employees in the payroll");
			return;
		}
		
		double totalsal = 0;
		for(Employee e: payroll) {
			totalsal += e.getSalary();
		}
		
		double avgsal = totalsal/ payroll.size();
		System.out.println("Employees getting more than the Average Salary");
		System.out.println("Average Salary: " + avgsal);
		for(Employee e: payroll) {
			if(e.getSalary() > avgsal) {
				System.out.println(e);
				isfound = true;
			}
		}
		if(!isfound) {
			System.out.println("There are no employee who is getting more than the avg sal");
		}
	}
	
}
